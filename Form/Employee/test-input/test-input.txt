//%attributes = {"lang":"en"} comment added and reserved by 4D.//Project Method: [Employee].GeneratedInput////   Parameter        Type             Description////Description://   ////Date        Init  Description//===============================================================================//02/05/2017   ??   Initial version.C_TEXT(vT_newManagerUUID)vT_newManagerUUID:=""ARRAY TEXT(aT_ManagerUUIDS;0)C_LONGINT($vL_FormEvent)$vL_FormEvent:=Form eventC_POINTER(vP_Managers_PU)OK:=1// Assume we are goodCase of : ($vL_FormEvent=On Load Record)DebugLog ("Form [test-input] load record"): ($vL_FormEvent=On Load)DebugLog ("Form [test-input] load form")// Get a list of managers who are;// a) Flagged as a manager// b) Currently employed (end date is empty or null)C_TEXT($vT_SelectedUUID)$vT_SelectedUUID:=[Employee]IDOK:=1// Get a pointer to the pop up as needed//If (Nil(vP_Managers_PU))vP_Managers_PU:=OBJECT Get pointer(Object named;"inputManagers_PU")// inputManagers_PUIf (Nil(vP_Managers_PU))ALERT("Could not get a pointer to the managers drop list")OK:=0End if //Else //DebugLog("[test-input]: Use existing drop down pointer")//End if If (OK=1)DebugLog ("TODO: populate managers drop down")CREATE SET([Employee];"Current Selection")C_LONGINT($vL_dummy)$vL_dummy:=Records in selection([Employee])QUERY([Employee];[Employee]IsManagerFg=True;*)QUERY([Employee];[Employee]ID#$vT_SelectedUUID)C_LONGINT($vL_numManagers)$vL_numManagers:=Records in selection([Employee])If ($vL_numManagers<1)DebugLog ("No managers found - promote someone")Else DebugLog ("Found ["+String($vL_numManagers)+"] managers")C_LONGINT($vL_index)// Before adding managers, ensure the control is empty again$vL_index:=Size of array(vP_Managers_PU->)If ($vL_index>0)DELETE FROM ARRAY(vP_Managers_PU->;1;$vL_index)End if // and the UUID array$vL_index:=Size of array(aT_ManagerUUIDS)If ($vL_index>0)DELETE FROM ARRAY(aT_ManagerUUIDS;1;$vL_index)End if For ($vL_index;1;$vL_numManagers)APPEND TO ARRAY(vP_Managers_PU->;Uppercase([Employee]Surname)+", "+[Employee]FirstName+", "+String([Employee]StartDate))APPEND TO ARRAY(aT_ManagerUUIDS;[Employee]ID)NEXT RECORD([Employee])End for USE SET("Current Selection")End if End if : ($vL_FormEvent=On Validate)DebugLog ("Form [test-input] On Validate - check for changes, and update"): ($vL_FormEvent=On Data Change)DebugLog ("Form [test-input] On data change")// Get a pointer to the pop up as neededIf (Nil(vP_Managers_PU))vP_Managers_PU:=OBJECT Get pointer(Object named;"Managers_PU")If (Nil(vP_Managers_PU))ALERT("Could not get a pointer to the managers drop list")OK:=0End if End if DebugLog ("Found ["+String(Size of array(aT_ManagerUUIDS))+"] manager UUIDS")If (Nil(vP_Managers_PU))DebugLog ("No Popup pointer")Else DebugLog ("Selected item ["+String(vP_Managers_PU->)+"]")End if End case 